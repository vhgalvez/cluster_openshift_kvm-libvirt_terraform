#cloud-config
hostname: ${hostname}
manage_etc_hosts: true

growpart:
  mode: auto
  devices: ["/"]
  ignore_growroot_disabled: false

resize_rootfs: true

chpasswd:
  list: |
    serra:$6$HE/RBjEb$dQXF27SB4..................
  expire: false

ssh_pwauth: true
disable_root: false

users:
  - name: serra
    shell: /bin/bash
    sudo: ['ALL=(ALL) NOPASSWD:ALL']
    groups: adm, wheel
    lock_passwd: false
    ssh_authorized_keys:
      - "ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAsA1JBEUJMBkDmWXlceuqV77pUoUF6O0gGJTcnwcCOQAR6fNWzZJkf8Fjp/nyjENg9sZyE9whZUqBBXO25H6apSD47Jx0ebHZbH+F5CBo8onG1UwmILWMZMDuIPdRiIS5L7eoyYJ6cGTriJu7ABaUpu9As+Wkj0C62uhb240AJPdsADKNhfvmBED+l9H2vt9EpStweMYjD+xqO9ZxW6E/0cfWrJyjE3M7t1lqtbVadV0F73clOHPC51FirEj/G0QCSvkmppBKTl73gLRe6AVmP0+eQIYU9QLIHiWATDa73veB+t1E7vib5JxCQo8//jSiFjNgs/KY0yZuOCj7PUxPow== ofsen@ocean"
      - "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABgQDFF4U68b4mR8YBBq76u+UzNjCu+epodUgc3HbUTFMWhY2arZdzPHlsuI7bgqXD38dCyVtn2MD6pxdIm+cOv9RVQn2h9taHF7Iywxh6oxaQUlxQ19WYPEfQ7ZuWhZyIFG8TDlfBWaUlZOVbNl0e3TdRA3DQYkbx2W6hnXShB1Gf+NdV1C6y3jwyaV4UcbaMv4irKyc8BWPzpHBD67bOJ3RMzQ+1Vhny2nYboF3oAnM12ab9D8fzVYGr0Wy+Hd7JHMjMeYLgqr+BSltnSi+VhD5f1thCGZryprogQd4YcuKFCqin+yK72mn8bwfL/nTLV/XPaAAZM3ZE6eMhRghpfJ+hn3DFTkQGFwk1VJI9gHvIdZVeU8/sz7Y9ZT2pWzHLQrb7w12vFwBCnUvxQZyylLCXx9pw1CGmK3nzlJPSL79q5Yd/v1YNn/D8L2LlOzyPeHeTlCinCUwRBGj2zCKRmlNViq34NduI+4H3T5+T63J2uDXCXZ6ihyP3lI1EkPKMJQc= root@azure"
      - "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDQtHcKWdBG3rUXmZlvKImL5cp8TgG1Y326uSoWCA4JALCXzH9VvCjd1F/KkivffRS205TuPyylnFLVFNBX5WiSaIpF6+Is/nRI1SDe4Zp2EWgHKyDaLbGFYtoOOU+EGk8sNj3rxIMNcG2hjPRf5JHhaz3c84Ra6wlsZInH6dQsnI9wMlNEDe1wlDWsp13k1aw7w8YKgIOQNFh4ZcIbM1MZXuEqV8x4RBUChjFbVarh0m59O9AYntm+iF2qFpmIZOQgFqsrbf4yufWGusHyO9ZMELYi9/TUnEcisbgepzAFzifX3Y8z1DIiPR9iny3zig9vrNiNJ2/nDW/RiGKHBc33 root@ovh"

write_files:
  - path: /etc/sysconfig/selinux
    content: |
      SELINUX=disabled
      SELINUXTYPE=targeted

  - path: /etc/sysconfig/network-scripts/ifcfg-eth0
    content: |
      TYPE="Ethernet"
      BOOTPROTO="none"
      ONBOOT="yes"
      IPADDR="192.168.1.100"
      PREFIX="24"
      GATEWAY="192.168.1.1"
      DNS1="8.8.8.8"
      DEVICE="eth0"
      NM_CONTROLLED="no"

runcmd:
  - echo "Setup completed" >> /var/log/cloud-init-output.log

timezone: ${timezone}


# package_update: true
# Below upgrades packages
# package_upgrade: true

runcmd:
  - [ /etc/rc.local.rebootonce ]


#power_state:
#    delay: now
#    mode: reboot
#    message: Reboot for Selinux
#    timeout: 1
#    condition: true
#
#

#rh_subscription:
#  username: sample@redhat.com
#  password: 'mypassword'
#  auto-attach: True
#  service-level: self-support
#
# subscription-manager register --org=11xxxxx --activationkey=yyyyy  --auto-attach
#rh_subscription:
#  activation-key: yyyyy
#  org: 11xxxx
#  auto-attach: true
#  service-level: self-support
#  enable-repo:
#    - rhel-9-for-x86_64-baseos-rpms
#    - rhel-9-for-x86_64-appstream-rpms
#    - rhel-9-for-x86_64-supplementary-rpms
